"use strict";var dataRuls=[{textRuls:"<p>Крестки-нолики</p>\n                <p>Игроки по очереди ставят на свободные клетки поля символы (один всегда крестики, другой всегда нолики). Первый, выстроивший в ряд 3 символа по вертикали, горизонтали или диагонали, выигрывает. Первый ход делает игрок, ставящий крестики.</p>"},{textRuls:"<p>Змейка</p>\n                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maxime necessitatibus voluptate molestias eaque iste\n                eum corrupti tenetur, illo nihil illum natus dolore perspiciatis ducimus eius exercitationem laboriosam tempore\n                reiciendis quaerat.</p>"}],popup=document.querySelector(".js-popup"),popupBody=document.querySelector(".js-popup__body"),popupClose=document.querySelector(".js-popup__close-btn"),popupText=document.querySelector(".js-popup__text"),popupOpenBtns=document.querySelectorAll(".js-btn-ruls");function mapRuls(e){return{ticTacToe:0,snake:1}[e]}null!==popup&&(popupClose.addEventListener("click",(function(e){popup.classList.remove("active")})),popupBody.addEventListener("click",(function(e){e.target.closest(".js-popup__content")||popup.classList.remove("active")})),popupOpenBtns.forEach((function(e){e.addEventListener("click",(function(e){popup.classList.add("active");var t=mapRuls(e.currentTarget.getAttribute("data-ruls")),r=dataRuls[t].textRuls;popupText.innerHTML="".concat(r)}))})));var world=document.querySelector(".js-snake__game");function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cells,origBoard,restartBtn=document.querySelector(".js-tic-tac-toe__restart"),newGameBtn=document.querySelector(".js-tic-tac-toe__new-game"),easyLevelBtn=document.querySelector(".js-tic-tac-toe__easy-level"),hardLevelBtn=document.querySelector(".js-tic-tac-toe__hard-level"),gameBoard=document.querySelector(".js-tic-tac-toe__game"),winText=document.querySelector(".js-tic-tac-toe__win-text"),keyLevel="easy",huPlayer="X",aiPlayer="O",huSymbol='<svg class="cross">\n<line class="cross-first" x1="10" y1="10" x2="70" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n<line class="cross-second" x1="70" y1="10" x2="10" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n</svg>',aiSymbol='<svg class="circle">\n<circle r="30" cx="40" cy="40" stroke="#c15746" stroke-width="10" fill="none" stroke-linecap="round" />\n</svg>',winCombos=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];function checkLevel(e){keyLevel=e,startGame(),restartBtn.removeAttribute("disabled"),newGameBtn.removeAttribute("disabled"),easyLevelBtn.setAttribute("disabled","disabled"),hardLevelBtn.setAttribute("disabled","disabled")}function initGame(){for(var e=0;e<9;e++){var t=document.createElement("div");t.setAttribute("id",e),t.classList.add("tic-tac-toe__cell"),gameBoard.appendChild(t)}cells=document.querySelectorAll(".tic-tac-toe__cell")}function startGame(){origBoard=[0,1,2,3,4,5,6,7,8];for(var e=0;e<cells.length;e++)cells[e].innerHTML="",cells[e].classList.add("mouse"),cells[e].addEventListener("click",turnClick);winText.innerText=""}function turnClick(e){"number"==typeof origBoard[e.target.id]&&(turn(e.target.id,huPlayer,huSymbol),checkTie()||checkWin(origBoard,huPlayer)||turn(bestSport(),aiPlayer,aiSymbol))}function turn(e,t,r){origBoard[e]=t,document.getElementById(e).innerHTML=r,cells[e].classList.remove("mouse"),checkWin(origBoard,t)&&gameOver(t)}function checkWin(e,t){var r,n=playerMoves(e,t),o=_createForOfIteratorHelper(winCombos);try{for(o.s();!(r=o.n()).done;){if(r.value.every((function(e){return-1!==n.indexOf(e)})))return!0}}catch(e){o.e(e)}finally{o.f()}return!1}function checkTie(){if(0==emptySquares().length){for(var e=0;e<cells.length;e++)cells[e].removeEventListener("click",turnClick);return setTimeout((function(){return declareWinner("Ничья")}),1500),!0}return!1}function gameOver(e){for(var t=0;t<cells.length;t++)cells[t].removeEventListener("click",turnClick),cells[t].classList.remove("mouse");setTimeout((function(){return declareWinner(e===huPlayer?"Вы победили":"Вы проиграли")}),1500)}function declareWinner(e){winText.innerText=e}function emptySquares(){return origBoard.filter((function(e){return"number"==typeof e}))}function playerMoves(e,t){for(var r=[],n=0;n<e.length;n++){e[n]===t&&(r=r.concat(n))}return r}function bestSport(){return"easy"===keyLevel?bestSportEasy():bestSportHard()}function bestSportEasy(){var e,t=emptySquares(),r=playerMoves(origBoard,huPlayer),n=_createForOfIteratorHelper(winCombos);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(r.includes(o[0])&&r.includes(o[1])){if(t.includes(o[2]))return o[2]}else if(r.includes(o[0])&&r.includes(o[2])){if(t.includes(o[3]))return o[1]}else if(r.includes(o[1])&&r.includes(o[2])&&t.includes(o[0]))return o[0]}}catch(e){n.e(e)}finally{n.f()}return t[Math.floor(Math.random()*t.length)]}function bestSportHard(){return minimax(origBoard,aiPlayer).index}function minimax(e,t){var r=emptySquares();if(checkWin(e,huPlayer))return{score:-10};if(checkWin(e,aiPlayer))return{score:10};if(0===r.length)return{score:0};for(var n,o=[],i=0;i<r.length;i++){var a=[];if(a.index=e[r[i]],e[r[i]]=t,t==aiPlayer){var c=minimax(e,huPlayer);a.score=c.score}else{var l=minimax(e,aiPlayer);a.score=l.score}e[r[i]]=a.index,o.push(a)}if(t===aiPlayer)for(var s=-1/0,u=0;u<o.length;u++)o[u].score>s&&(s=o[u].score,n=u);else for(var d=1/0,p=0;p<o.length;p++)o[p].score<d&&(d=o[p].score,n=p);return o[n]}null!==gameBoard&&(initGame(),newGameBtn.addEventListener("click",(function(){easyLevelBtn.removeAttribute("disabled"),hardLevelBtn.removeAttribute("disabled"),newGameBtn.setAttribute("disabled","disabled"),restartBtn.setAttribute("disabled","disabled")})),easyLevelBtn.addEventListener("click",(function(){checkLevel("easy")})),hardLevelBtn.addEventListener("click",(function(){checkLevel("hard")})),restartBtn.addEventListener("click",(function(){startGame()})));
//# sourceMappingURL=main.js.map
