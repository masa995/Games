"use strict";function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cells,origBoard,restartBtn=document.querySelector(".js-tic-tac-toe__restart"),newGameBtn=document.querySelector(".js-tic-tac-toe__new-game"),easyLevelBtn=document.querySelector(".js-tic-tac-toe__easy-level"),hardLevelBtn=document.querySelector(".js-tic-tac-toe__hard-level"),gameBoard=document.querySelector(".js-tic-tac-toe__game"),winText=document.querySelector(".js-tic-tac-toe__win-text"),keyLevel="easy",huPlayer="X",aiPlayer="O",huSymbol='<svg class="cross">\n<line class="cross-first" x1="10" y1="10" x2="70" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n<line class="cross-second" x1="70" y1="10" x2="10" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n</svg>',aiSymbol='<svg class="circle">\n<circle r="30" cx="40" cy="40" stroke="#c15746" stroke-width="10" fill="none" stroke-linecap="round" />\n</svg>',winCombos=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];function checkLevel(e){keyLevel=e,startGame(),restartBtn.removeAttribute("disabled"),newGameBtn.removeAttribute("disabled"),easyLevelBtn.setAttribute("disabled","disabled"),hardLevelBtn.setAttribute("disabled","disabled")}function initGame(){for(var e=0;e<9;e++){var t=document.createElement("div");t.setAttribute("id",e),t.classList.add("tic-tac-toe__cell"),gameBoard.appendChild(t)}cells=document.querySelectorAll(".tic-tac-toe__cell")}function startGame(){origBoard=[0,1,2,3,4,5,6,7,8];for(var e=0;e<cells.length;e++)cells[e].innerHTML="",cells[e].classList.add("mouse"),cells[e].addEventListener("click",turnClick);winText.innerText=""}function turnClick(e){"number"==typeof origBoard[e.target.id]&&(turn(e.target.id,huPlayer,huSymbol),checkTie()||checkWin(origBoard,huPlayer)||turn(bestSport(),aiPlayer,aiSymbol))}function turn(e,t,r){origBoard[e]=t,document.getElementById(e).innerHTML=r,cells[e].classList.remove("mouse"),checkWin(origBoard,t)&&gameOver(t)}function checkWin(e,t){for(var r=[],n=0;n<e.length;n++){e[n]===t&&(r=r.concat(n))}var a,i=r,o=_createForOfIteratorHelper(winCombos);try{for(o.s();!(a=o.n()).done;){if(a.value.every((function(e){return-1!==i.indexOf(e)})))return!0}}catch(e){o.e(e)}finally{o.f()}return!1}function checkTie(){if(0==emptySquares().length){for(var e=0;e<cells.length;e++)cells[e].removeEventListener("click",turnClick);return setTimeout((function(){return declareWinner("Ничья")}),1500),!0}return!1}function gameOver(e){for(var t=0;t<cells.length;t++)cells[t].removeEventListener("click",turnClick),cells[t].classList.remove("mouse");setTimeout((function(){return declareWinner(e===huPlayer?"Вы победили":"Вы проиграли")}),1500)}function declareWinner(e){winText.innerText=e}function emptySquares(){return origBoard.filter((function(e){return"number"==typeof e}))}function bestSport(){return"easy"===keyLevel?bestSportEasy():bestSportHard()}function bestSportEasy(){var e=emptySquares();return e[Math.floor(Math.random()*e.length)]}function bestSportHard(){return minimax(origBoard,aiPlayer).index}function minimax(e,t){var r=emptySquares();if(checkWin(e,huPlayer))return{score:-10};if(checkWin(e,aiPlayer))return{score:10};if(0===r.length)return{score:0};for(var n,a=[],i=0;i<r.length;i++){var o=[];if(o.index=e[r[i]],e[r[i]]=t,t==aiPlayer){var c=minimax(e,huPlayer);o.score=c.score}else{var l=minimax(e,aiPlayer);o.score=l.score}e[r[i]]=o.index,a.push(o)}if(t===aiPlayer)for(var s=-1/0,u=0;u<a.length;u++)a[u].score>s&&(s=a[u].score,n=u);else for(var d=1/0,y=0;y<a.length;y++)a[y].score<d&&(d=a[y].score,n=y);return a[n]}initGame(),newGameBtn.addEventListener("click",(function(){easyLevelBtn.removeAttribute("disabled"),hardLevelBtn.removeAttribute("disabled"),newGameBtn.setAttribute("disabled","disabled"),restartBtn.setAttribute("disabled","disabled")})),easyLevelBtn.addEventListener("click",(function(){checkLevel("easy")})),hardLevelBtn.addEventListener("click",(function(){checkLevel("hard")})),restartBtn.addEventListener("click",(function(){startGame()}));
//# sourceMappingURL=main.js.map
