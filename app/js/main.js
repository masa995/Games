"use strict";function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var cells,origBoard,restartBtn=document.querySelector(".js-tic-tac-toe__restart"),newGameBtn=document.querySelector(".js-tic-tac-toe__new-game"),easyLevelBtn=document.querySelector(".js-tic-tac-toe__easy-level"),hardLevelBtn=document.querySelector(".js-tic-tac-toe__hard-level"),gameBoard=document.querySelector(".js-tic-tac-toe__game"),winText=document.querySelector(".js-tic-tac-toe__win-text"),keyLevel="easy",huPlayer="X",aiPlayer="O",huSymbol='<svg class="cross">\n<line class="cross-first" x1="10" y1="10" x2="70" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n<line class="cross-second" x1="70" y1="10" x2="10" y2="70" stroke="#333" stroke-width="10" stroke-linecap="round" />\n</svg>',aiSymbol='<svg class="circle">\n<circle r="30" cx="40" cy="40" stroke="#c15746" stroke-width="10" fill="none" stroke-linecap="round" />\n</svg>',winCombos=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];function checkLevel(e){keyLevel=e,startGame(),restartBtn.removeAttribute("disabled"),newGameBtn.removeAttribute("disabled"),easyLevelBtn.setAttribute("disabled","disabled"),hardLevelBtn.setAttribute("disabled","disabled")}function initGame(){for(var e=0;e<9;e++){var r=document.createElement("div");r.setAttribute("id",e),r.classList.add("tic-tac-toe__cell"),gameBoard.appendChild(r)}cells=document.querySelectorAll(".tic-tac-toe__cell")}function startGame(){origBoard=[0,1,2,3,4,5,6,7,8];for(var e=0;e<cells.length;e++)cells[e].innerHTML="",cells[e].classList.add("mouse"),cells[e].addEventListener("click",turnClick);winText.innerText=""}function turnClick(e){"number"==typeof origBoard[e.target.id]&&(turn(e.target.id,huPlayer,huSymbol),checkTie()||checkWin(origBoard,huPlayer)||turn(bestSport(),aiPlayer,aiSymbol))}function turn(e,r,t){origBoard[e]=r,document.getElementById(e).innerHTML=t,cells[e].classList.remove("mouse"),checkWin(origBoard,r)&&gameOver(r)}function checkWin(e,r){var t,n=playerMoves(e,r),a=_createForOfIteratorHelper(winCombos);try{for(a.s();!(t=a.n()).done;){if(t.value.every((function(e){return-1!==n.indexOf(e)})))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}function checkTie(){if(0==emptySquares().length){for(var e=0;e<cells.length;e++)cells[e].removeEventListener("click",turnClick);return setTimeout((function(){return declareWinner("Ничья")}),1500),!0}return!1}function gameOver(e){for(var r=0;r<cells.length;r++)cells[r].removeEventListener("click",turnClick),cells[r].classList.remove("mouse");setTimeout((function(){return declareWinner(e===huPlayer?"Вы победили":"Вы проиграли")}),1500)}function declareWinner(e){winText.innerText=e}function emptySquares(){return origBoard.filter((function(e){return"number"==typeof e}))}function playerMoves(e,r){for(var t=[],n=0;n<e.length;n++){e[n]===r&&(t=t.concat(n))}return t}function bestSport(){return"easy"===keyLevel?bestSportEasy():bestSportHard()}function bestSportEasy(){var e,r=emptySquares(),t=playerMoves(origBoard,huPlayer),n=_createForOfIteratorHelper(winCombos);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(t.includes(a[0])&&t.includes(a[1])){if(r.includes(a[2]))return a[2]}else if(t.includes(a[0])&&t.includes(a[2])){if(r.includes(a[3]))return a[1]}else if(t.includes(a[1])&&t.includes(a[2])&&r.includes(a[0]))return a[0]}}catch(e){n.e(e)}finally{n.f()}return r[Math.floor(Math.random()*r.length)]}function bestSportHard(){return minimax(origBoard,aiPlayer).index}function minimax(e,r){var t=emptySquares();if(checkWin(e,huPlayer))return{score:-10};if(checkWin(e,aiPlayer))return{score:10};if(0===t.length)return{score:0};for(var n,a=[],i=0;i<t.length;i++){var o=[];if(o.index=e[t[i]],e[t[i]]=r,r==aiPlayer){var c=minimax(e,huPlayer);o.score=c.score}else{var l=minimax(e,aiPlayer);o.score=l.score}e[t[i]]=o.index,a.push(o)}if(r===aiPlayer)for(var s=-1/0,u=0;u<a.length;u++)a[u].score>s&&(s=a[u].score,n=u);else for(var d=1/0,f=0;f<a.length;f++)a[f].score<d&&(d=a[f].score,n=f);return a[n]}initGame(),newGameBtn.addEventListener("click",(function(){easyLevelBtn.removeAttribute("disabled"),hardLevelBtn.removeAttribute("disabled"),newGameBtn.setAttribute("disabled","disabled"),restartBtn.setAttribute("disabled","disabled")})),easyLevelBtn.addEventListener("click",(function(){checkLevel("easy")})),hardLevelBtn.addEventListener("click",(function(){checkLevel("hard")})),restartBtn.addEventListener("click",(function(){startGame()}));
//# sourceMappingURL=main.js.map
