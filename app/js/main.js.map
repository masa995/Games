{"version":3,"sources":["ticTacToe.js"],"names":["origBoard","gameBoard","document","querySelector","restartBtn","winText","huPlayer","aiPlayer","huSymbol","aiSymbol","winCombos","size","cells","initGame","i","cell","createElement","setAttribute","classList","add","appendChild","resultCells","querySelectorAll","startGame","cellsGames","Array","from","keys","length","innerHTML","remove","addEventListener","e","turnClick","textContent","event","target","id","turn","checkTie","bestSport","cellId","player","whoSymbol","getElementById","gameWon","checkWin","gameOver","board","results","concat","_step","plays","_iterator","_createForOfIteratorHelper","entries","s","n","done","_step$value","_slicedToArray","value","index","every","elem","indexOf","err","f","removeEventListener","declareWinner","who","arguments","undefined","emptySquares","filter","item"],"mappings":"+1DAAA,IAaIA,UAbEC,UAAYC,SAASC,cAAc,yBACnCC,WAAaF,SAASC,cAAc,4BACpCE,QAAUH,SAASC,cAAc,6BACjCG,SAAW,IACXC,SAAW,IACXC,SAAQ,yQAIRC,SAAQ,wIAKRC,UAAY,CAChB,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAGHC,KAAO,EAEPC,MAAQC,WAMd,SAASA,WACP,IAAK,IAAIC,EAAI,EAAGA,EAAIH,KAAOA,KAAMG,IAAK,CACpC,IAAMC,EAAOb,SAASc,cAAc,OACpCD,EAAKE,aAAa,KAAMH,GACxBC,EAAKG,UAAUC,IAAI,qBACnBlB,UAAUmB,YAAYL,GAGxB,IAAMM,EAAcnB,SAASoB,iBAAiB,sBAG9C,OAFAC,UAAUF,GAEHA,EAIT,SAASE,UAAUC,GACjBxB,UAAYyB,MAAMC,KAAKD,MAAM,GAAGE,QAEhC,IAAK,IAAIb,EAAI,EAAGA,EAAIU,EAAWI,OAAQd,IACrCU,EAAWV,GAAGe,UAAY,GAC1BL,EAAWV,GAAGI,UAAUY,OAAO,SAC/BN,EAAWV,GAAGiB,iBAAiB,SAAS,SAACC,GACvCC,UAAUD,MAGd3B,QAAQ6B,YAAc,GAGxB,SAASD,UAAUE,GACwB,iBAA9BnC,UAAUmC,EAAMC,OAAOC,MAChCC,KAAKH,EAAMC,OAAOC,GAAI/B,SAAUE,UAC3B+B,YACHD,KAAKE,YAAajC,SAAUE,WAKlC,SAAS6B,KAAKG,EAAQC,EAAQC,GAC5B3C,UAAUyC,GAAUC,EACpBxC,SAAS0C,eAAeH,GAAQZ,UAAYc,EAC5C,IAAIE,EAAUC,SAAS9C,UAAW0C,GAC9BG,GACFE,SAASF,EAASjC,OAItB,SAASkC,SAASE,EAAON,GAGvB,IAFA,IAAIO,EAAU,GAELnC,EAAI,EAAGA,EAAIkC,EAAMpB,OAAQd,IAAK,CAC3BkC,EAAMlC,KACN4B,IACRO,EAAUA,EAAQC,OAAOpC,IAI7B,IAV+BqC,EAU3BC,EAAQH,EACRJ,EAAU,KAXiBQ,EAAAC,2BAaN5C,UAAU6C,WAbJ,IAa/B,IAAAF,EAAAG,MAAAL,EAAAE,EAAAI,KAAAC,MAA8C,CAAA,IAAAC,EAAAC,eAAAT,EAAAU,MAAA,GAApCC,EAAoCH,EAAA,GAE5C,GAF4CA,EAAA,GAEpCI,OAAM,SAAAC,GAAI,OAA6B,IAAzBZ,EAAMa,QAAQD,MAAe,CACjDnB,EAAU,CAAEiB,MAAOA,EAAOpB,OAAQA,GAElC,QAlB2B,MAAAwB,GAAAb,EAAArB,EAAAkC,GAAA,QAAAb,EAAAc,IAqB/B,OAAOtB,EAGT,SAASE,SAASF,EAASrB,GAEzB,IAAK,IAAIV,EAAI,EAAGA,EAAIU,EAAWI,OAAQd,IACrCU,EAAWV,GAAGsD,oBAAoB,QAASnC,WAE7CoC,cAAcxB,GAAWvC,SAAW,cAAgB,gBAItD,SAAS+D,gBAAkC,IAApBC,EAAoBC,UAAA3C,OAAA,QAAA4C,IAAAD,UAAA,GAAAA,UAAA,GAAd,aAC3BlE,QAAQ6B,YAAcoC,EAGxB,SAASG,eACP,OAAOzE,UAAU0E,QAAO,SAAAC,GAAI,MAAmB,iBAARA,KAGzC,SAASnC,YACP,OAAOiC,eAAe,GAGxB,SAASlC,WACP,GAA6B,GAAzBkC,eAAe7C,OAAa,CAC9B,IAAK,IAAId,EAAI,EAAGA,EAAIF,MAAMgB,OAAQd,IAChCF,MAAME,GAAGsD,oBAAoB,QAASnC,WAGxC,OADAoC,cAAc,UACP,EAET,OAAO,EAvGTjE,WAAW2B,iBAAiB,SAAS,WACnCR,UAAUX","file":"main.js","sourcesContent":["const gameBoard = document.querySelector('.js-tic-tac-toe__game');\r\nconst restartBtn = document.querySelector('.js-tic-tac-toe__restart');\r\nconst winText = document.querySelector('.js-tic-tac-toe__win-text');\r\nconst huPlayer = 'X';\r\nconst aiPlayer = 'O';\r\nconst huSymbol = `<svg class=\"cross\">\r\n<line class=\"cross-first\" x1=\"10\" y1=\"10\" x2=\"70\" y2=\"70\" stroke=\"#333\" stroke-width=\"10\" stroke-linecap=\"round\" />\r\n<line class=\"cross-second\" x1=\"70\" y1=\"10\" x2=\"10\" y2=\"70\" stroke=\"#333\" stroke-width=\"10\" stroke-linecap=\"round\" />\r\n</svg>`;\r\nconst aiSymbol = `<svg class=\"circle\">\r\n<circle r=\"30\" cx=\"40\" cy=\"40\" stroke=\"#c15746\" stroke-width=\"10\" fill=\"none\" stroke-linecap=\"round\" />\r\n</svg>`;\r\n\r\nlet origBoard;\r\nconst winCombos = [\r\n  [0, 1, 2],\r\n  [3, 4, 5],\r\n  [6, 7, 8],\r\n  [0, 3, 6],\r\n  [1, 4, 7],\r\n  [2, 5, 8],\r\n  [0, 4, 8],\r\n  [6, 4, 2]\r\n];\r\n\r\nconst size = 3;\r\n\r\nconst cells = initGame();\r\n\r\nrestartBtn.addEventListener('click', () => {\r\n  startGame(cells);\r\n});\r\n\r\nfunction initGame() {\r\n  for (let i = 0; i < size * size; i++) {\r\n    const cell = document.createElement('div');\r\n    cell.setAttribute('id', i);\r\n    cell.classList.add('tic-tac-toe__cell');\r\n    gameBoard.appendChild(cell);\r\n  }\r\n\r\n  const resultCells = document.querySelectorAll('.tic-tac-toe__cell');\r\n  startGame(resultCells);\r\n\r\n  return resultCells;\r\n}\r\n\r\n\r\nfunction startGame(cellsGames) {\r\n  origBoard = Array.from(Array(9).keys());\r\n\r\n  for (let i = 0; i < cellsGames.length; i++) {\r\n    cellsGames[i].innerHTML = '';\r\n    cellsGames[i].classList.remove('mouse');\r\n    cellsGames[i].addEventListener('click', (e) => {\r\n      turnClick(e);\r\n    });\r\n  }\r\n  winText.textContent = '';\r\n}\r\n\r\nfunction turnClick(event) {\r\n  if (typeof origBoard[event.target.id] == 'number') {\r\n    turn(event.target.id, huPlayer, huSymbol);\r\n    if (!checkTie()) {\r\n      turn(bestSport(), aiPlayer, aiSymbol);\r\n    }\r\n  }\r\n}\r\n\r\nfunction turn(cellId, player, whoSymbol) {\r\n  origBoard[cellId] = player;\r\n  document.getElementById(cellId).innerHTML = whoSymbol\r\n  let gameWon = checkWin(origBoard, player);\r\n  if (gameWon) {\r\n    gameOver(gameWon, cells);\r\n  }\r\n}\r\n\r\nfunction checkWin(board, player) {\r\n  let results = [];\r\n\r\n  for (let i = 0; i < board.length; i++) {\r\n    const e = board[i];\r\n    if (e === player) {\r\n      results = results.concat(i);\r\n    }\r\n  }\r\n\r\n  let plays = results;\r\n  let gameWon = null;\r\n\r\n  for (let [index, win] of winCombos.entries()) {\r\n\r\n    if (win.every(elem => plays.indexOf(elem) !== -1)) {\r\n      gameWon = { index: index, player: player }; //в gameWon - хранится объект {index : номер выйграшной комбинации; player: знак игрока(O или X)}\r\n      // console.log(gameWon);\r\n      break;\r\n    }\r\n  }\r\n  return gameWon;\r\n}\r\n\r\nfunction gameOver(gameWon, cellsGames) {\r\n\r\n  for (let i = 0; i < cellsGames.length; i++) {\r\n    cellsGames[i].removeEventListener('click', turnClick);\r\n  }\r\n  declareWinner(gameWon == huPlayer ? 'Вы победили' : 'Вы проиграли');\r\n}\r\n\r\n\r\nfunction declareWinner(who = 'неизвестно') { //ф-ция выводит результат игры \r\n  winText.textContent = who;\r\n}\r\n\r\nfunction emptySquares() {\r\n  return origBoard.filter(item => typeof item == 'number');\r\n}\r\n\r\nfunction bestSport() {\r\n  return emptySquares()[0]; //первый элемент из доступных ячеек\r\n}\r\n\r\nfunction checkTie() {\r\n  if (emptySquares().length == 0) {\r\n    for (let i = 0; i < cells.length; i++) {\r\n      cells[i].removeEventListener('click', turnClick);\r\n    }\r\n    declareWinner('Ничья');\r\n    return true;\r\n  }\r\n  return false;\r\n}"]}