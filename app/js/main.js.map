{"version":3,"sources":["snake.js","ticTacToe.js"],"names":["world","document","querySelector","cells","origBoard","restartBtn","newGameBtn","easyLevelBtn","hardLevelBtn","gameBoard","winText","keyLevel","huPlayer","aiPlayer","huSymbol","aiSymbol","winCombos","checkLevel","level","startGame","removeAttribute","setAttribute","initGame","i","cell","createElement","classList","add","appendChild","querySelectorAll","length","innerHTML","addEventListener","turnClick","innerText","event","target","id","turn","checkTie","checkWin","bestSport","squareId","player","playerSymbol","getElementById","remove","gameOver","board","_step","moves","playerMoves","_iterator","_createForOfIteratorHelper","s","n","done","value","every","elem","indexOf","err","e","f","emptySquares","removeEventListener","setTimeout","declareWinner","who","filter","results","concat","bestSportEasy","bestSportHard","_step2","arr","_iterator2","win","includes","Math","floor","random","minimax","index","newBoard","availSpots","score","bestMove","move","result","push","bestScore","Infinity"],"mappings":"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","file":"main.js","sourcesContent":["const world = document.querySelector('.js-snake__game');\r\n// const ctx = world.getContext('2d');\r\n","const restartBtn = document.querySelector('.js-tic-tac-toe__restart');\r\nconst newGameBtn = document.querySelector('.js-tic-tac-toe__new-game');\r\nconst easyLevelBtn = document.querySelector('.js-tic-tac-toe__easy-level');\r\nconst hardLevelBtn = document.querySelector('.js-tic-tac-toe__hard-level');\r\nconst gameBoard = document.querySelector('.js-tic-tac-toe__game');\r\nconst winText = document.querySelector('.js-tic-tac-toe__win-text');\r\nlet cells;\r\nlet keyLevel = 'easy';\r\nconst huPlayer = 'X';\r\nconst aiPlayer = 'O';\r\nconst huSymbol = `<svg class=\"cross\">\r\n<line class=\"cross-first\" x1=\"10\" y1=\"10\" x2=\"70\" y2=\"70\" stroke=\"#333\" stroke-width=\"10\" stroke-linecap=\"round\" />\r\n<line class=\"cross-second\" x1=\"70\" y1=\"10\" x2=\"10\" y2=\"70\" stroke=\"#333\" stroke-width=\"10\" stroke-linecap=\"round\" />\r\n</svg>`;\r\nconst aiSymbol = `<svg class=\"circle\">\r\n<circle r=\"30\" cx=\"40\" cy=\"40\" stroke=\"#c15746\" stroke-width=\"10\" fill=\"none\" stroke-linecap=\"round\" />\r\n</svg>`;\r\n\r\nlet origBoard;\r\nconst winCombos = [\r\n  [0, 1, 2],\r\n  [3, 4, 5],\r\n  [6, 7, 8],\r\n  [0, 3, 6],\r\n  [1, 4, 7],\r\n  [2, 5, 8],\r\n  [0, 4, 8],\r\n  [6, 4, 2]\r\n];\r\n\r\ninitGame();\r\n\r\nnewGameBtn.addEventListener('click', () => {\r\n  easyLevelBtn.removeAttribute('disabled');\r\n  hardLevelBtn.removeAttribute('disabled');\r\n  newGameBtn.setAttribute('disabled', 'disabled');\r\n  restartBtn.setAttribute('disabled', 'disabled');\r\n})\r\n\r\neasyLevelBtn.addEventListener('click', () => {\r\n  checkLevel('easy');\r\n})\r\n\r\nhardLevelBtn.addEventListener('click', () => {\r\n  checkLevel('hard');\r\n})\r\n\r\nrestartBtn.addEventListener('click', () => {\r\n  startGame();\r\n})\r\n\r\nfunction checkLevel(level) {\r\n  keyLevel = level;\r\n  startGame();\r\n  restartBtn.removeAttribute('disabled');\r\n  newGameBtn.removeAttribute('disabled');\r\n  easyLevelBtn.setAttribute('disabled', 'disabled');\r\n  hardLevelBtn.setAttribute('disabled', 'disabled');\r\n}\r\n\r\nfunction initGame() {\r\n  for (let i = 0; i < 9; i++) {\r\n    const cell = document.createElement('div');\r\n    cell.setAttribute('id', i);\r\n    cell.classList.add('tic-tac-toe__cell');\r\n    gameBoard.appendChild(cell);\r\n  }\r\n  cells = document.querySelectorAll('.tic-tac-toe__cell');\r\n}\r\n\r\nfunction startGame() {\r\n  origBoard = [0, 1, 2, 3, 4, 5, 6, 7, 8];\r\n  for (let i = 0; i < cells.length; i++) {\r\n    cells[i].innerHTML = '';\r\n    cells[i].classList.add('mouse');\r\n    cells[i].addEventListener('click', turnClick);\r\n  }\r\n  winText.innerText = '';\r\n}\r\n\r\nfunction turnClick(event) {\r\n  if (typeof origBoard[event.target.id] == 'number') {\r\n    turn(event.target.id, huPlayer, huSymbol);\r\n\r\n    if ((!checkTie()) && (!checkWin(origBoard, huPlayer))) {\r\n      turn(bestSport(), aiPlayer, aiSymbol);\r\n    }\r\n  }\r\n}\r\n\r\nfunction turn(squareId, player, playerSymbol) {\r\n  origBoard[squareId] = player;\r\n  document.getElementById(squareId).innerHTML = playerSymbol;\r\n  cells[squareId].classList.remove('mouse');\r\n\r\n  let gameWon = checkWin(origBoard, player);\r\n  if (gameWon) {\r\n    gameOver(player);\r\n  }\r\n}\r\n\r\nfunction checkWin(board, player) {\r\n  let moves = playerMoves(board, player);\r\n\r\n  for (let win of winCombos) {\r\n    if (win.every((elem) => moves.indexOf(elem) !== -1)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction checkTie() {\r\n  if (emptySquares().length == 0) {\r\n    for (let i = 0; i < cells.length; i++) {\r\n      cells[i].removeEventListener('click', turnClick);\r\n    }\r\n    setTimeout(() => declareWinner('Ничья'), 1500);\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction gameOver(player) {\r\n  for (let i = 0; i < cells.length; i++) {\r\n    cells[i].removeEventListener('click', turnClick);\r\n    cells[i].classList.remove('mouse');\r\n  }\r\n  setTimeout(() => declareWinner(player === huPlayer ? 'Вы победили' : 'Вы проиграли'), 1500);\r\n}\r\n\r\nfunction declareWinner(who) {\r\n  winText.innerText = who;\r\n}\r\n\r\nfunction emptySquares() {\r\n  return origBoard.filter((cell) => typeof cell == 'number');\r\n}\r\n\r\nfunction playerMoves(board, player) {\r\n  let results = [];\r\n\r\n  for (let i = 0; i < board.length; i++) {\r\n    const e = board[i];\r\n    if (e === player) {\r\n      results = results.concat(i);\r\n    }\r\n  }\r\n  return results;\r\n}\r\n\r\nfunction bestSport() {\r\n  if (keyLevel === 'easy') {\r\n    return bestSportEasy();\r\n  }\r\n  else if (keyLevel === 'hard') {\r\n    return bestSportHard();\r\n  }\r\n  else {\r\n    return bestSportHard();\r\n  }\r\n}\r\n\r\nfunction bestSportEasy() {\r\n  let arr = emptySquares();\r\n  let moves = playerMoves(origBoard, huPlayer);\r\n\r\n  for (let win of winCombos) {\r\n    if ((moves.includes(win[0])) && (moves.includes(win[1]))) {\r\n      if (arr.includes(win[2])) {\r\n        return win[2];\r\n      }\r\n    } else if ((moves.includes(win[0])) && (moves.includes(win[2]))) {\r\n      if (arr.includes(win[3])) {\r\n        return win[1];\r\n      }\r\n    } else if ((moves.includes(win[1])) && (moves.includes(win[2]))) {\r\n      if (arr.includes(win[0])) {\r\n        return win[0];\r\n      }\r\n    }\r\n  }\r\n  let index = Math.floor(Math.random() * arr.length);\r\n  return arr[index];\r\n}\r\n\r\nfunction bestSportHard() {\r\n  let arr = minimax(origBoard, aiPlayer);\r\n  return arr.index;\r\n}\r\n\r\nfunction minimax(newBoard, player) {\r\n  let availSpots = emptySquares();\r\n\r\n  if (checkWin(newBoard, huPlayer)) {\r\n    return { score: -10 };\r\n  } else if (checkWin(newBoard, aiPlayer)) {\r\n    return { score: 10 };\r\n  } else if (availSpots.length === 0) {\r\n    return { score: 0 };\r\n  }\r\n  let moves = [];\r\n\r\n  for (let i = 0; i < availSpots.length; i++) {\r\n    let move = [];\r\n\r\n    move.index = newBoard[availSpots[i]];\r\n    newBoard[availSpots[i]] = player;\r\n\r\n    if (player == aiPlayer) {\r\n      let result = minimax(newBoard, huPlayer);\r\n      move.score = result.score;\r\n    } else {\r\n      let result = minimax(newBoard, aiPlayer);\r\n      move.score = result.score;\r\n    }\r\n\r\n    newBoard[availSpots[i]] = move.index;\r\n    moves.push(move);\r\n  }\r\n\r\n  let bestMove;\r\n\r\n  if (player === aiPlayer) {\r\n    let bestScore = -Infinity;\r\n    for (let i = 0; i < moves.length; i++) {\r\n      if (moves[i].score > bestScore) {\r\n        bestScore = moves[i].score;\r\n        bestMove = i;\r\n      }\r\n    }\r\n  } else {\r\n    let bestScore = Infinity;\r\n    for (let i = 0; i < moves.length; i++) {\r\n      if (moves[i].score < bestScore) {\r\n        bestScore = moves[i].score;\r\n        bestMove = i;\r\n      }\r\n    }\r\n  }\r\n  return moves[bestMove];\r\n}"]}